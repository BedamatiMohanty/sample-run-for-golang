\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{occi}
\setlength{\headheight}{13pt}
\pagestyle{fancy}

% default sans-serif
\renewcommand{\familydefault}{\sfdefault}

% no lines for headers and footers
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% header
\fancyhf{}
\lhead{GWD-R}
\rhead{\today}

% footer
\lfoot{occi-wg@ogf.org}
\rfoot{\thepage}

% paragraphs need some space...
\setlength{\parindent}{0pt}
\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}

%\renewcommand\paragraph{%
%  \@startsection{paragraph}{4}{0mm}%
%     {-\baselineskip}%
%     {.5\baselineskip}%
%     {\normalfont\normalsize\bfseries}}

% some space between header and text...
\headsep 13pt

\setcounter{secnumdepth}{4}

\begin{document}

% header on first page is different
\thispagestyle{empty}

GWD-R \hfill  Thijs Metsch, Platform Computing\\
OCCI-WG \hfill  Andy Edmonds, Intel\\
\rightline {October 7, 2010}\\
\rightline {Updated: \today}

\vspace*{0.5in}

\begin{Large}
\textbf{Open Cloud Computing Interface - Infrastructure}
\end{Large}

\vspace*{0.5in}

\underline{Status of this Document}

\input{include/status}

\underline{Obsoletes}

This document obsoletes GFD-xxx [REFERENCE].

\underline{Copyright Notice}

Copyright \copyright Open Grid Forum (2009-2010). All Rights Reserved.

\underline{Trademarks}

OCCI is a trademark of the Open Grid Forum.

\underline{Abstract}

\input{include/abstract}

\newpage
\tableofcontents
\newpage

\section{Introduction}
\input{include/introduction}

OCCI makes an ideal interoperable boundary interface between the web and the
internal resource management system of infrastructure providers.

\section{Notational Conventions}
\input{include/notational}

UML activity diagrams do not specify how OCCI should be rendered but what
possible request and outcomes can be.

% begin infrastructure content

\section{Infrastructure}

The main infrastructure types defined within OCCI are:
\begin{itemize}
\item \hl{Compute}: Information processing resources.
\item \hl{Network}: Interconnection resources.
\item \hl{Storage}: Information recording resources.
\end{itemize}
These infrastructure types inherit the OCCI Core Model \hl{Resource} or \hl{Link} base type and all its 
attributes. OCCI infrastructure implementors MUST implement these types. The HTTP 
Rendering document defines how to serialise and interact with these types 
using RESTful communication.

As REQUIRED by the OCCI Core Model specification, every type instantiated that is 
a subclass of \hl{Resource} or \hl{Link} MUST be assigned a \hl{Kind} that identifies the instantiated 
type. Each such \hl{Kind} MUST be related to the \hl{Resource} or \hl{Link} base type's \hl{Kind}. 
That assigned \hl{Kind} MUST always remain immutable to any client.

The following table describe the \hl{Kind} defined for each of the infrastructure \hl{Resource} 
or \hl{Link}subtypes:

\mytablefloat{\label{tbl:kinds}The \hl{Kind} instances defined for
the infrastructure sub-types of \hl{Resource} and \hl{Link}}{
\begin{tabular}{llll}
Term & Scheme & Title & Related \hl{Kind} \\
\hline
compute & http://schemas.ogf.org/occi/infrastructure\# & Compute \hl{Resource}
& http://schemas.ogf.org/occi/core\#resource \\
storage & http://schemas.ogf.org/occi/infrastructure\# & Storage \hl{Resource}
& http://schemas.ogf.org/occi/core\#resource \\
storagelink & http://schemas.ogf.org/occi/infrastructure\# & StorageLink \hl{Link}
& http://schemas.ogf.org/occi/core\#link \\
network & http://schemas.ogf.org/occi/infrastructure\# & Network \hl{Resource}
& http://schemas.ogf.org/occi/core\#resource \\
networklink & http://schemas.ogf.org/occi/infrastructure\# & NetworkLink \hl{Link}
& http://schemas.ogf.org/occi/core\#link \\
\end{tabular}
}

For information on extending these types, please refer to the OCCI Core Model document.

The following sections on Compute, Storage and Network types detail the attributes, 
\hl{Actions} and states defined for each resource type, including type-specific mixins. 
Following those the definition of infrastructure related \hl{Link} subtypes are given.

\subsection{Compute}
The \hl{Compute} type represents a generic information processing resource, e.g.~a
virtual machine. \hl{Compute} inherits the \hl{Resource} base type defined in
OCCI Core Model \cite{occi:core}.
\hl{Compute} is assigned the \hl{Kind} instance
\textit{http://schemas.ogf.org/occi/infrastructure\#compute}.
\marginpar{\textbf{Ralf: Only this section has been updated with the proper
wording as introduced in Core. Please perfect this section before converting
the other sections to the same style!}}

\mytablefloat{\label{tbl:compute}Attributes defined for
	\hl{Compute}. The attributes are defined by \hl{Compute}'s \hl{Kind} instance
	\textit{http://schemas.ogf.org/occi/infrastructure\#compute} 
	(See 'attributes' in the inherited base type \hl{Category})  \cite{occi:core}.
	}
	{
		\begin{tabular}{lp{2.5cm}p{1cm}lp{6cm}}
		\toprule
		Attribute&Type&Multi\-plicity&Mutability&Description\\
		\colrule
		occi.compute.architecture & Enum \{x86, x64\} & 0\ldots1 
		& Mutable & CPU Architecture of the instance.\\
		occi.compute.cores & Integer & 0\ldots1 & Mutable 
		& Number of CPU cores assigned to the instance.\\
		occi.compute.hostname & String & 0\ldots1 
		& Mutable & Fully Qualified DNS hostname for the instance.\\
		occi.compute.speed & Float, ${\mathbf 10}^9$ (GHz) & 0\ldots1 
		& Mutable & CPU Clock frequency (speed) in gigahertz.\\
		occi.compute.memory & Float, ${\mathbf 10}^9$ (GiB) & 0\ldots1 
		& Mutable & Maximum RAM in gigabytes allocated to the instance.\\
		occi.compute.state & Enum \{active, inactive, suspended\} & 1 
		& Immutable & Current state of the instance.\\
		\botrule
		\end{tabular}
	}

Table~\ref{tbl:compute} describes the attributes \footnote{See ’attributes’ in the inherited 
base type \hl{Category}  \cite{occi:core}} 
defined \hl{Compute} through its \hl{Kind} instance. These attributes
MUST be exposed by an instance of the \hl{Compute} type of an OCCI implementation.

\marginpar{\textbf{Andy:what is the 'flag' attribute? How does it work?}}

\mytablefloat{
	\label{tbl:compute_actions}%
	\hl{Action}s applicable to \hl{Compute} and defined by the \hl{Kind} instance
	\textit{http://schemas.ogf.org/occi/infrastructure\#compute}. Every \hl{Action}
	in the table is identified by a \hl{Category} instance using the
	\textit{http://schemas.ogf.org/occi/infrastructure/compute/action\#}
	categorisation scheme. ``Action term'' below refers to the term of the \hl{Action}'s
	\hl{Category} identifier.
}
{
	\begin{tabular}{lll}
	\toprule
	Action Term & Target state & Attributes \\
	\colrule
	start & active & -- \\
	stop & inactive & flag=\{graceful, acpioff, poweroff\} \\
	restart & active (via stop and start chain) & flag=\{graceful, warm, cold\} \\
	suspend & suspended & flag=\{hibernate, suspend\} \\
	\botrule
	\end{tabular}
}

Table~\ref{tbl:compute_actions} describes the \hl{Action}s defined for
\hl{Compute} by its \hl{Kind} instance. These \hl{Action}s MUST be exposed 
by an instance of the \hl{Compute} type of an OCCI implementation. 
Figure~\ref{fig:compute_state} illustrates the state diagram for a \hl{Compute} instance.

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.4]{figs/compute-state.png}
	\caption{State diagram for the \hl{Compute} type}
	\label{fig:compute_state}
\end{figure}

\subsection{Network}
\hl{Network} represents a L2 networking entity (e.g. a virtual switch). It can be extended using 
the mixin mechanism (or sub-classed) to support L3/L4 capabilities such as TCP/IP etc. 
For the purposes of this specification we define an OCCI mixin so that IP networking can be supported
where required. 

The \hl{Network} type is assigned the \textit{http://schemas.ogf.org/occi/infrastructure\#network} \hl{Kind}. A \hl{Network} instance MUST use and expose this \hl{Kind}.

%\subsubsection{Attributes}

\mytablefloat{
	\label{tbl:network}Attributes defined for
	\hl{Network}. The attributes are defined by \hl{Network}'s \hl{Kind} instance
	\textit{http://schemas.ogf.org/occi/infrastructure\#network} 
	(See 'attributes' in the inherited base type \hl{Category})  \cite{occi:core}.
}
{
	%\begin{tabular}{lllll}
	\begin{tabular}{lp{2.5cm}p{1cm}lp{6cm}}
	\toprule
	Attribute&Type&Multi\-plicity&Mutability&Description\\
	\colrule
	occi.network.vlan & Integer: 0-4095 & 0\ldots1 & Mutable 
	& 802.1q VLAN Ientifier (e.g. 343).\\
	occi.network.label & Token & 0\ldots1 & Mutable 
	& Tag based VLANs (e.g. external-dmz).\\
	occi.network.state & Enumeration: \{active, inactive\} & 1 & Immutable 
	& Current state of the instance.\\
	\botrule
	\end{tabular}
}
Table~\ref{tbl:network} describes the attributes \footnote{See ’attributes’ in the inherited 
base type \hl{Category}  \cite{occi:core}} 
defined \hl{Network} through its \hl{Kind} instance. These attributes
MUST be exposed by an instance of the \hl{Network} type of an OCCI implementation.

\mytablefloat{
	\label{tbl:network_actions}%
	\hl{Action}s applicable to \hl{Network} and defined by the \hl{Kind} instance
	\textit{http://schemas.ogf.org/occi/infrastructure\#network}. Every \hl{Action}
	in the table is identified by a \hl{Category} instance using the
	\textit{http://schemas.ogf.org/occi/infrastructure/network/action\#}
	categorisation scheme. ``Action term'' below refers to the term of the \hl{Action}'s
	\hl{Category} identifier.
}
{
	\begin{tabular}{lll}
	\toprule
	Action Term&Target State&Attributes\\
	\colrule
	up & active & --\\
	down & inactive & --\\
	\botrule
	\end{tabular}
}

Table~\ref{tbl:network_actions} describes the \hl{Action}s defined for
\hl{Network} by its \hl{Kind} instance. These \hl{Action}s MUST be exposed 
by an instance of the \hl{Network} type of an OCCI implementation. 
Figure~\ref{fig:network_state} illustrates the state diagram for a \hl{Network} instance.

%\clearpage
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.4]{figs/network-state.png}
	\caption{State diagram for Network}
	\label{fig:network_state}
\end{figure}

\subsubsection{IPNetworking Mixin}

In order to support L3/L4 capabilities (e.g. IP, TCP etc) an OCCI mixin is herewith defined. 

The IPNetworking mixin is assigned the http://schemas.ogf.org/occi/infrastructure/network\#ipnetwork Category. A IPNetworking mixin MUST use and expose this Category.

\begin{tabular}{lllll}
Attribute&Type&Multiplicity&Mutability&Description\\
\hline
occi. ipnetwork.address & IPv4 or IPv6 Address range, CIDR notation & 0\ldots1 & Mutable & Internet Protocol(IP) network address (e.g. 192.168.0.1/24, fc00::/7)\\
occi. ipnetwork.gateway & IPv4 or IPv6 Address & 0\ldots1 & Mutable & Internet Protocol(IP) network address (e.g. 192.168.0.1/24, fc00::/7)\\
occi. ipnetwork.allocation & String Enumeration, \{dynamic, static\} & 0\ldots1 & Mutable & Address mechanism: dynamic use the dynamic host configuration protocol, static uses user supplied static network configurations.\\
\end{tabular}

\subsection{Storage}
The Storage Resource type is assigned the http://schemas.ogf.org/occi/infrastructure\#storage Category. A Storage Resource instance MUST use and expose this Category.

\subsubsection{Attributes}
The attributes that MUST be exposed by an instance of the Storage Resource type are as follows:

\begin{tabular}{lllll}
Attribute&Type&Multiplicity&Mutability&Description\\
\hline
occi.storage.size & Float, ${\mathbf 10}^9$ (GiB) & 1 & Mutable & Storage size in gigabytes of the instance.\\
occi.storage.state & String Enumeration, \{online, offline, degraded\} & 1 & Immutable & Current status of the instance.\\
\end{tabular}

\subsubsection{Actions}
Actions can be performed upon instances of the Storage Resource type. The set that MUST be supported are as follows:

\begin{tabular}{lll}
Action&Target State&Parameters\\
\hline
http://schemas.ogf.org/occi/infrastructure/storage/action\#online & online & None\\
http://schemas.ogf.org/occi/infrastructure/storage/action\#offline & offline & None\\
http://schemas.ogf.org/occi/infrastructure/storage/action\#backup & None & None\\
http://schemas.ogf.org/occi/infrastructure/storage/action\#snapshot & None & None\\
http://schemas.ogf.org/occi/infrastructure/storage/action\#resize & None & size (Float  ${\mathbf 10}^9$\\ (GiB))
\end{tabular}

\subsubsection{States}
Below illustrates the state diagram based on the actions defined above.

%\clearpage
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.4]{figs/storage-state.png}
	\caption{State diagram for Storage}
	\label{fig:storage_state}
\end{figure}

\subsection{Linking Infrastructure Resources}
In order to create entities like virtual data centres or virtual clusters, it is necessary to allow the linking of the various infrastructure Resource types. This can be accomplished extending the core specification Link entity as the Link entity does not include enough information about specific types of infrastructure links.

\subsubsection{Linking to Network Resources}
NetworkInterface represents an L2 client device (e.g. network adapter). It can be extended using the mix-in mechanism or sub-classed to support L3/L4 capabilities such as TCP/IP etc. 

The Networkinterface Link type is assigned the http://schemas.ogf.org/occi/infrastructure\#networkinterface Category. A Networkinterface Link instance MUST use and expose this Category.

\paragraph{Attributes}
The attributes that MUST be exposed by an instance of the NetworkInterface Link type are as follows:

\begin{tabular}{lllll}
Attribute&Type&Multiplicity&Mutability&Description\\
\hline
occi.networklink.interface & String & 1 & Immutable & Identifier that relates the link to the link's device interface\\
occi.networklink.mac & String & 1 & Mutable & MAC address associated with the link's device interface\\
occi.networklink.state & String Enumeration\{ active, inactive \}& 1 & Immutable & Current status of the instance.\\
\end{tabular}

\paragraph{States}
Depicted below are the states that a NetworkInterface instance can hold.

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.4]{figs/infra-link-state.png}
	\caption{State diagram for NetworkInterface}
	\label{fig:networklink_state}
\end{figure}

\paragraph{IPNetworkInterface Mixin}
In order to support L3/L4 capabilities (e.g. IP, TCP etc) with the NetworkInterface Link type an OCCI mixin is herewith defined.

The IPNetworkInterface mixin is assigned the http://schemas.ogf.org/occi/infrastructure/networkinterface\#ipnetworkinterface Category. An IPNetworking mixin MUST use and expose this Category.

\begin{tabular}{lllll}
Attribute&Type&Multiplicity&Mutability&Description\\
\hline
occi.networkinterface.ip & IPv4 or IPv6 Address & 1 & Mutable & Internet Protocol(IP) network address (e.g. 192.168.0.1/24, fc00::/7) of the link\\
occi.networkinterface.gateway & IPv4 or IPv6 Address & 0\ldots1 & Mutable & Internet Protocol(IP) network address (e.g. 192.168.0.1/24, fc00::/7)\\
occi.networkinterface.allocation & String Enumeration, \{dynamic, static\} & 1 & Mutable & Address mechanism: dynamic use the dynamic host configuration protocol, static uses user supplied static network configurations.\\
\end{tabular}

\subsubsection{Linking to Storage Resources}
StorageLink Link type represents a link from a Resource to a target Storage Resource.

The StorageLink Link type is assigned the  http://schemas.ogf.org/occi/infrastructure\#storagelink Category. A StorageLink Link instance MUST use and expose this Category.

\paragraph{Attributes}
The attributes that MUST be exposed by an instance of the StorageLink Link type are as follows:

\begin{tabular}{lllll}
Attribute&Type&Multiplicity&Mutability&Description\\
\hline
occi.storagelink.deviceid & String & 1 & Mutable & Device identifier as defined by the IEEE ??? standard.\\
%occi.storagelink.osdevice & String & 0\ldots1 & Mutable & Device identifier as presented to the guest OS.\\
occi.storagelink.mountpoint & String & 0\ldots1 & Mutable & Point to where the storage is mounted in the guest OS.\\
occi.storagelink.state & String Enumeration\{ active, inactive \}& 1 & Immutable & Current status of the instance.\\
\end{tabular}

\paragraph{States}
Depicted below are the states that a StorageLink instance can hold.

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.4]{figs/infra-link-state.png}
	\caption{State diagram for StorageLink}
	\label{fig:storagelink_state}
\end{figure}

\subsection{Infrastructure Templates}
There are 2 supported infrastructural template types in OCCI.

\subsubsection{OS Template}
OCCI implementers SHOULD support this, otherwise what they provision will be merely Resources without any execution environment (e.g. operating system). Of the two supported template types, this is the most basic and necessary template category that a provider SHOULD offer. The construction of it consists of a provider specific 'scheme' and a descriptive 'title' detailing the OS. The 'term' value of the template category is a provider specific identifier that corresponds to a particular virtual machine image configuration. A provider-defined OS Template Category MUST be related to the OCCI OS Template Category in order to give absolute type information. The OS Template Category is defined by the http://schemas.ogf.org/occi/infrastructure\#os\_tpl Category.

A typical example of such a category is shown below using the HTTP rendering. 

\begin{verbatim}
POST /compute
Category: compute; scheme='http://schemas.ogf.org/occi/infrastructure#'; title='Compute Instance', 
    ubuntu-9.10; scheme='http://provider.com/templates/os#'; title='Ubuntu 9.10'
Attribute: occi.compute.memory=0.5, occi.compute.cores=2
\end{verbatim}
In the example a provider has defined an OS template which offers the ability to run Ubuntu Linux upon a client's provisioned compute resource.

How a provider manages their set of OS templates will be determined by themselves and so provider-specific.

\subsubsection{Resource Template}
The Resource Template Category builds upon the concept of OS Templates. A Resource Template is a provider-defined Category that refers to a preset Resource configuration. The provider will associate a pre-determined set of Resource attributes with a particular term identifier. A provider-defined Resource Template Category MUST be related to the OCCI Resource Template Category. The Resource Template Category is defined by the http://schemas.ogf.org/occi/infrastructure\#resource\_tpl Category.

A typical example of such a Category's use is shown below using the HTTP rendering. 

\begin{verbatim}
POST /compute
Category: compute; scheme='http://schemas.ogf.org/occi/infrastructure#'; title='Compute Instance', 
    small; scheme="http://provider.com/templates/compute#"; title="Small Instance", 
    ubuntu-9.10; scheme=""; title=""
\end{verbatim}

In this example, the provider offers Compute Resources based on different sizes (small, medium, large). Each 'size' of Compute Resource corresponds to a predetermined set of OCCI attributes. In the example below a "small" Compute Resource is provisioned. Specifying "small" corresponds to a Compute Resource Attribute set of:

\begin{verbatim}
Attribute: occi.compute.cores='2', occi.compute.speed='2.4', 
    occi.compute.memory='1.0', occi.compute.arch='x86'
\end{verbatim}

How a provider manages from the administrative context their set of Resource Templates will be determined by themselves and so provider-specific.

% end infrastructure content

\section{Contributors}

Editors: Andy Edmonds, Thijs Metsch \\
Contributors: Alexander Papaspyrou, Ralf Nyr\'en, Sam Johnston

\textbf{TBD: Bunch op people missing here - create table\ldots}

\begin{verbatim}

\end{verbatim}

\section{Glossary}
\input{include/glossary}

\section{Intellectual Property Statement}
\input{include/ip}

\section{Disclaimer}
\input{include/disclaimer}

\section{Full Copyright Notice}
\input{include/copyright}

\bibliographystyle{IEEEtran}
\bibliography{references}

\end{document}
