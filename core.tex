\documentclass[10pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{fullpage}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage{comment}
\usepackage{occi}
\setlength{\headheight}{13pt}
\pagestyle{fancy}

% default sans-serif
\renewcommand{\familydefault}{\sfdefault}

% no lines for headers and footers
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% header
\fancyhf{}
\lhead{GWD-R}
\rhead{\today}

% footer
\lfoot{occi-wg@ogf.org}
\rfoot{\thepage}

% paragraphs need some space...
\setlength{\parindent}{0pt}
\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}

% some space between header and text...
\headsep 13pt

\setcounter{secnumdepth}{4}

% comments, temp stuff
\newcommand{\ralf}[1]{\textcolor{red}{Ralf: #1}}

\begin{document}

% header on first page is different
\thispagestyle{empty}

GWD-R \hfill  Thijs Metsch, Platform Computing\\
OCCI-WG \hfill  Andy Edmonds, Intel\\
\rightline {Ralf Nyr√©n, Aurenav}\\
\rightline {October 14, 2010}\\
\rightline {Updated: \today}

\vspace*{0.5in}

\begin{Large}
\textbf{Open Cloud Computing Interface - Core}
\end{Large}

\vspace*{0.5in}

\underline{Status of this Document}

\input{include/status}

\underline{Obsoletes}

This document obsoletes GFD-xxx [REFERENCE].

\underline{Copyright Notice}

Copyright \copyright Open Grid Forum (2009-2010). All Rights Reserved.

\underline{Trademarks}

OCCI is a trademark of the Open Grid Forum.

\underline{Abstract}

\input{include/abstract}

\newpage
\tableofcontents
\newpage

\section{Introduction}
The Open Cloud Computing Interface (OCCI) is a RESTful Protocol and
API for all kinds of Management tasks. OCCI was originally initiated
to create a remote management API for IaaS%
\footnote{Infrastructure as a Service}
model based Services, allowing for the development of interoperable tools for
common tasks including deployment, autonomic scaling and monitoring.
%
It has since evolved into an flexible API with a strong focus on
interoperability while still offering a high degree of extensibility. The
current release of the Open Cloud Computing Interface is suitable to serve many
other models in addition to IaaS, including e.g.~PaaS and SaaS.

In order to be modular and extensible the current OCCI specification is
released as a suite of complimentary documents which together form the complete
specification.
%
The documents are divided into three categories consisting of the OCCI Core,
the OCCI Renderings and the OCCI Extensions.
%
\begin{itemize}
\item The OCCI Core specification consist of a single document defining the
 OCCI model. The OCCI model is the core of OCCI and can be manipulated by {\em
 renderings} and expanded through {\em extensions}.
\item The OCCI Rendering specifications consist of multiple documents each
 describing a particular rendering of the OCCI model. Multiple renderings can
 manipulate the same instance of the OCCI model and will automatically support
 any additions to the model which follow the extension rules defined in OCCI
 Core.
\item The OCCI Extension specifications consist of multiple documents each
 describing a particular extension of the OCCI model. The extension documents
 describe additions to the OCCI model defined within the OCCI specification
 suite.
\end{itemize}
%
The current specification consist of three documents.
Future releases of OCCI may include additional rendering and extension
specifications. The documents of the current OCCI specification suite are:

\begin{description}
\item[OCCI Core] describes the formal definition of the the OCCI model
\cite{occi:core}.
\item[OCCI HTTP Rendering] defines how to manipulate the OCCI model using the
RESTful OCCI API \cite{occi:http_rendering}. The document defines how the OCCI model can
be communicated and thus serialised using the HTTP protocol.
\item[OCCI Infrastructure] contains the definition of the OCCI Infrastructure
extension for the IaaS domain \cite{occi:infrastructure}. The document defines
additional resource types, their attributes and the actions that can be taken
on each resource type.
\end{description}


\section{Notational Conventions}
\input{include/notational}

\section{OCCI Core}
\textbf{Andy: This preceding text reads as a general introduction. Move to Introduction section.}

\ralf{Which part of intro should be present in {\em all} documents and which part in Core?}

\textbf{Andy: to help the reader a broad outline/reading guide should be introduced here
e.g. 'we start with describing Category, work through the definition of Action, Mixin and Kind,
following which Entity is described. Lastly we discuss Resource and Link, the main extension
points of the OCCI core model.'}

The Open Cloud Computing Interface is a boundary protocol and API
that acts as a service front-end to a provider's internal management
framework. Figure~\ref{fig:placement} shows OCCI's place in a
provider's architecture.
\begin{figure}[h]
	\centering
	\includegraphics[scale=0.5]{figs/occi-intro.pdf}
	\caption{OCCI's place in a provider's architecture}
	\label{fig:placement}
\end{figure}
Service consumers can be both end-users and other system instances. OCCI is
suitable for both cases. The key feature is that OCCI can be used as a
management API for all kinds of resources while at the same time maintaining a
high level of interoperability.

This document, the OCCI Core specification, defines the OCCI model. This
model is the core of the specification suite and it can be manipulated 
\textbf{(Andy: 'manipulated' not quite right)}
\ralf{(This is used in intro as well, what should we write instead?)}
by renderings and expanded 
through extensions. In itself, the core model is only useful
for a very limited set of use cases. However, it provides the basis for
renderings and extensions to build upon.

\section{OCCI Core Model}
The OCCI model defines a representation of instance types which can be
manipulated through an OCCI Rendering implementation. 
It is an abstraction of real-world 
resources, including the means to identify, classify, associate 
and extend those resources. 

A fundamental feature of the OCCI model is that it can be extended in such a
way that any extension will be discoverable and visible to an OCCI client at
run-time. An OCCI client can connect to an OCCI implementation with
domain-specific extensions, without knowing anything in advance, and still be
able to provide a decent end-user experience \textbf{(Andy: not clear what is meant here by phrase)}. 
\ralf{(tried to describe what the discovery interface will provide...)}
For example, a web-based OCCI
client could easily be reused as the management tool for a wide variety of
services.

The OCCI model can be extended through inheritance but also
using a ``mix-in'' like concept \textbf{(Andy: Mixins are not new and can be referenced and explained
by the likes of Lisp mixins etc. We must reference here.)}
\ralf{Any suggestion on a proper reference to use?}.
The mix-in model only applies at the instance
level, i.e.~the ``object level'', and thereby differs from the more common uses
of the mix-in concept. A mix-in in OCCI can never be applied to a type, only to
an instance.

\subsection{Overview}

The UML class diagram shown in figure~\ref{fig:occi_model} gives an overview of
the OCCI model. It must be noted that the UML diagram in itself is not a
complete definition of the model. The diagram is merely provided as an overview
to help understanding the model. 

\begin{figure}[!h]
{\centering \resizebox*{0.9\columnwidth}{!}{\rotatebox{270}
      {\includegraphics{figs/core_model.pdf}}} \par}
\caption{UML class diagram of the OCCI model. The diagram provides an
overview of the OCCI model but is not a standalone definition thereof}
\label{fig:occi_model}
\end{figure}

The heart of the OCCI model is the \hl{Resource} type. Any resource exposed
through OCCI is a \hl{Resource} or a sub-type thereof.
A resource can be e.g.~a virtual machine, a job in a job submission system, a
user, etc.
%
The \hl{Resource} type contains a number of common attributes that
domain-specific \hl{Resource} types inherit. The \hl{Resource} type is
complemented by the \hl{Link} type which associates one \hl{Resource} instance
with another.
%
The \hl{Link} type also contains a number of common attributes that
domain-specific \hl{Link} types inherit.

\hl{Entity} is an abstract type which both \hl{Resource} and \hl{Link} inherit.
Each sub-type of \hl{Entity} is identified by a unique \hl{Kind} instance.
%

The \hl{Kind} type is the core of the classification and identification
system built into the OCCI model. \hl{Kind} is a specialisation of
\hl{Category} and introduces additional capabilities in terms of \hl{Action}s.
An \hl{Action} represent an invocable operation applicable to a resource
instance.

The last type defined by the OCCI model is the \hl{Mixin} type. An instance of
\hl{Mixin} can be associated with a resource instance, i.e.~a sub-type of
\hl{Entity}, to ``mix-in'' additional capabilities at run-time.
%
For compliance with OCCI Core, all of the types defined in the OCCI model MUST
be implemented.  The following sections of the specification contain the formal
definition of the OCCI model.

\subsection{Terms and definitions}
Section \ref{sec:glossary} provides a glossary of all terms and definitions with
a specific meaning to the OCCI specification suite. However, for reader
convenience, a sub-set of the glossary is provided here as well. The following
terminology have specific meaning in the OCCI context:
\begin{description}
\item[capabilities] In the OCCI context capabilities refer to attributes and
 \hl{Action}s exposed by a resource instance.
\ralf{Ok definition of capabilities?}
\item[mix-in] An instance of the \hl{Mixin} type associated with a {\bf resource
 instance}. The ``mix-in'' concept as used by OCCI {\em only} applies to
 instances, never to \hl{Entity} types.
\item[OCCI base type(s)] The OCCI base types are \hl{Entity}, \hl{Resource},
 \hl{Link} and \hl{Action}.
\item[resource instance] An instance of a sub-type of \hl{Entity}. The OCCI
 model defines two sub-types of \hl{Entity}, the \hl{Resource} type and the
 \hl{Link} type.  However, the term {\bf resource instance} is defined to
 include any instance of a {\em sub-type} of \hl{Resource} or \hl{Link} as
 well.
\item[type] A {\bf type} refer to one of those defined by the OCCI core model.
The OCCI model types are \hl{Category}, \hl{Kind}, \hl{Mixin}, \hl{Action},
\hl{Entity}, \hl{Resource} and \hl{Link}.
\end{description}

\subsection{Classification and Identification}
\label{sec:classification}
The OCCI core model provides a built-in type classification system allowing for safe
extension towards domain-specific usage (e.g. infrastructure). This system is the OCCI type system
and offers the means to be easily exposed over a text-based 
\textbf{(Andy: OCCI could be implemented over a binary-based one too (e.g. AMQP), why disregard that?)} protocol.
\ralf{True. The point is that we can identify an OCCI model type using a text-string (i.e. the scheme+term). In other words, we do not rely on some binary type format to transfer the type information. So, how to say this properly then?}
%
The classification system can be summarised with the following key features:
\begin{itemize}
\item Each OCCI base type and extension thereof is assigned a unique type
 identifier (a \hl{Kind} instance), which allow for dynamic discovery of
 available types. All \hl{Entity} sub-types, including core model extensions, are assigned
 a unique \hl{Kind} instance.
\item The inheritance structure of \hl{Entity}, \hl{Resource} and \hl{Link} is
 client discoverable. This also applies to any sub-type of \hl{Resource} and
 \hl{Link} and therefore an OCCI client can discover the inheritance structure
 used by a particular OCCI implementation. The discovery of the inheritance
 structure is made possible through the relationship of \hl{Kind} instances.
\textbf{(Andy:Unclear and confusing.)}.
\ralf{Better now?}
\item The classification system allows \hl{Mixin} instances to be associated
 to resource instances in order to assign additional capabilities in terms of
 attributes and \hl{Action}s at run-time.
\item Tagging of resource instances is supported through the association
 of \hl{Mixin} instances. A tag is simply a \hl{Mixin} instance which define no
 additional capabilities \ralf{Is the def of ``capabilities'' ok?}
\item A collection of associated resource instances is implicitly defined for
 each \hl{Kind} and \hl{Mixin} instance. I.e.~all resource instances associated
 with a particular \hl{Kind} or \hl{Mixin} instance form a collection.
\end{itemize}

\subsubsection{Kind}
\label{sec:kind}
\textbf{Andy, Thijs: This should not be the first model entity discussed.
It should be Category then followed by Kind and Mixin.}

The \hl{Kind} type, together with the \hl{Mixin} type, defines the
classification system of the OCCI model. It MUST be implemented. The \hl{Kind}
type represents the type identification mechanism for all \hl{Entity} types present in
the model.

A \hl{Kind} {\em instance} is assigned to each and every \hl{Entity} sub-type
defined in an OCCI implementation. The capabilities, in terms of attributes and
\hl{Action}s, represented by a \hl{Kind} instance describe the capabilities of
its \hl{Entity} sub-type.
%
In the initial instantiation of the OCCI model, with no core model extensions, three instances
of \hl{Kind} will be present: one for \hl{Entity}, another for \hl{Resource}
and the last one for \hl{Link}. 

Every resource instance MUST be associated with the \hl{Kind} instance of its
\hl{Entity} sub-type \textbf{(Andy: Unclear and confusing, the example does help however)}. 
For example an instance of \hl{Resource} MUST be
associated with the \hl{Kind} instance which identifies the \hl{Resource} {\em
type}.

\mytablefloat{\label{tbl:kind}Attributes defined for the \hl{Kind} type}{
\begin{tabular}{llllp{2.7in}}
\toprule
Attribute & Type & Multiplicity & Client Mutability & Description \\
\colrule
actions & \hl{Action} & 0..* & Immutable & Set of \hl{Action}s defined by the \hl{Kind} instance. \\
related & \hl{Kind} & 0..* & Immutable & Set of related \hl{Kind} instances. \\
entity\_type & \hl{Entity} & 1 & Immutable & \hl{Entity} type uniquely identified by the \hl{Kind} instance. \\
entities & \hl{Entity} & 0..* & Immutable & Set of resource instances, i.e.~\hl{Entity} sub-type instances. Resources instantiated from the \hl{Entity} sub-type which is uniquely identified by this \hl{Kind} instance. \\
\botrule
\end{tabular}
}
The \hl{Kind} type inherits the \hl{Category} type and all inherited
attributes \textbf{(Andy: which 'attributes'? the attributes attribute of Category 
or attributes of a model type - this is confusing)} MUST be implemented. Table~\ref{tbl:kind} defines the
attributes the \hl{Kind} type MUST implement to be compliant 
\textbf{(Andy: 'Client Mutability' needs to be explained first before these tables are shown.)}.

A unique \hl{Kind} instance is assigned as the unique type identifier of every
\hl{Entity} sub-type, including \hl{Entity} itself. The following rules apply
to the \hl{Kind} type:
\begin{itemize}
\item A unique \hl{Kind} instance MUST be assigned to each and every sub-type
 of \hl{Entity}.
\item A \hl{Kind} instance MUST define all capabilities of its \hl{Entity}
 sub-type in terms of attributes and \hl{Action}s. If an \hl{Entity} sub-type
 has an attribute named {\bf X}, the corresponding \hl{Kind} instance MUST define
 an attribute named {\bf X}.
\item A \hl{Kind} instance MUST be related, either directly or indirectly, to
 the \hl{Kind} instance of \hl{Entity},
 i.e. \textit{http://schemas.ogf.org/occi/core\#entity}.
 %
\textbf{(Andy, Thijs: Category should be discussed first before Kind.)} 
See section~\ref{sec:kind_relationship} for the definition of \hl{Kind}
 relationships.
\item If type {\bf B} inherits type {\bf A}, where {\bf A} is a sub-type of
 \hl{Entity}, the \hl{Kind} instance of {\bf B} MUST be directly related to the
 \hl{Kind} instance of {\bf A}. \textbf{(Andy: Makes more sense if phrased 
 the opposite way around i.e. if Kind has X then the Entity sub-type must implement X)}
\end{itemize}

\textbf{(Andy: It would be advisable to show these rules graphically to aid quick understanding.)}

\subsubsection{Mixin}
The \hl{Mixin} type complements the \hl{Kind} type in defining the
OCCI core model type classification system. It MUST be implemented. The \hl{Mixin}
type represent an extension mechanism, which allow new capabilities to
be added to resource instances both at creation-time and/or run-time.

A \hl{Mixin} {\em instance} can be associated with any existing resource
instance and thereby add new capabilities, in terms of attributes and
\hl{Action}s, to the resource instance. In the initial instantiation of the OCCI
model, with no extensions, no \hl{Mixin} instances are present.

Any resource instance MAY be associated with any number of \hl{Mixin}
instances.  However, an OCCI implementation MAY apply restrictions to which
resource instances a particular \hl{Mixin} instance can be associated to.

\textbf{(Thijs: Unclear: A mix-in in OCCI can never be applied to a type, only to an instance.)}

\mytablefloat{\label{tbl:type}Attributes defined for the \hl{Mixin} type}{
\begin{tabular}{llllp{2.7in}}
\toprule
Attribute & Type & Multiplicity & Client Mutability & Description \\
\colrule
actions & \hl{Action} & 0..* & Immutable & Set of \hl{Action}s defined by the \hl{Mixin} instance. \\
related & \hl{Mixin} & 0..* & Immutable & Set of related \hl{Mixin} instances. \\
entities & \hl{Entity} & 0..* & Mutable & Set of resource instances, i.e.~\hl{Entity} sub-type instances, associated with the \hl{Mixin} instance. \\
\botrule
\end{tabular}
}
The \hl{Mixin} type inherits the \hl{Category} type and all inherited
attributes MUST be implemented. Table~\ref{tbl:type} defines the
additional attributes the \hl{Mixin} type MUST implement to be compliant.
The following rules apply to the \hl{Mixin} type:
\begin{itemize}
\item A \hl{Mixin} instance defines additional capabilities for each
 resource instance it is associated to. A \hl{Mixin} instance
 add capabilities in terms of attributes and \hl{Action}s.
\item A \hl{Mixin} instance MUST only be associated with resource
 {\em instances}, either at creation-time or run-time.
\item A \hl{Mixin} instance MAY be related to another \hl{Mixin} instance.
 If \hl{Mixin} {\bf B} is related to \hl{Mixin} {\bf A}, any resource instance
 associated with \hl{Mixin} {\bf B} will receive the capabilities defined by
 both \hl{Mixin} {\bf B} and \hl{Mixin} {\bf A}.
 %
 See section~\ref{sec:mixin_relationship} for the definition of \hl{Mixin}
 relationships.
\item A \hl{Mixin} instance defining no additional capabilities, in terms
 of attributes or \hl{Action}s, is considered to be a tag.
\end{itemize}

\subsubsection{Category}
\label{sec:category}
The \hl{Category} type is the basis of the type identification mechanism used by the
OCCI classification system. It MUST be implemented. Instances of the
\hl{Category} type itself are only used to identify \hl{Action} types. All
other uses of \hl{Category} properties are managed through its sub-types
\hl{Kind} and \hl{Mixin}.
%
Table~\ref{tbl:category} defines the attributes the \hl{Category} type MUST
implement to be compliant.

\mytablefloat{\label{tbl:category}Attributes defined for the \hl{Category} type}{
\begin{tabular}{llllp{2.7in}}
\toprule
Attribute & Type & Multiplicity & Client Mutability & Description \\
\colrule
term & String & 1 & Immutable & Unique identifier of the \hl{Category} instance within the categorisation scheme. \\
scheme & URI & 1 & Immutable & The categorisation scheme. \\
title & String & 0..1 & Immutable & The display name of an instance. \\
attributes & String & 0..* & Immutable & The set of resource attribute names defined by the \hl{Category} instance. \\
\botrule
\end{tabular}
}

A \hl{Category} instance is uniquely identified by concatenating the
categorisation scheme with the category term,
e.g.~\textit{http://example.com/category/scheme\#term}.
This is done to enable discovery of \hl{Category} definitions in text based
renderings such as HTTP. All renderings MUST make use of and understand
concatenated unique type identifiers of \hl{Category} instances.
%
Sub-types of \hl{Category} such as \hl{Kind} and \hl{Mixin} inherit this property.

The categorisation schemes defined in the OCCI specification all use the
\textit{http://schemas.ogf.org/occi/} base URL. This base URL is reserved for
OCCI an MUST NOT be used by domain-specific extensions.

Attribute names defined by \hl{Category} instances%
\footnote{Also applies to \hl{Kind} and \hl{Mixin} instances.}
use the ``\texttt{occi.}''~prefix.  This prefix is reserved for OCCI and MUST NOT
be used by domain-specific extensions.

\subsubsection{Kind Relationship}
\label{sec:kind_relationship}

\textbf{(Andy: One of the most confusing section.)}

\textbf{(Andy: Make this a subsection of Kind to capitalise on context.)}

As previously defined a \hl{Kind} instance MUST be related, either directly or
indirectly, to the \hl{Kind} instance assigned to the \hl{Entity} type,
i.e.~\textit{http://schemas.ogf.org/occi/core\#entity}.
%
The OCCI base types \hl{Resource} and \hl{Link} both extend \hl{Entity} and
therefore their identifying \hl{Kind} instances MUST be related to \hl{Entity}
type's \hl{Kind} instance.
%
These rules, including further sub-typing by extensions, imply a hierarchy of
related \hl{Kind} instances. The \hl{Kind} relationships thus mirrors the type
inheritance structure of the OCCI model and any extension thereof.

In an example \textbf{(Andy: Will help hugely if shown graphically.)} where a 
domain-specific ``Custom Compute Resource'' is a sub-type
the OCCI Infrastructure type Compute, which in turn is a sub-type of the
\hl{Resource} type, four related \hl{Kind} instances would be involved.
%
Table~\ref{tbl:relationship} illustrates the exemplified hierarchy of \hl{Kind}
instances relating the domain-specific \hl{Kind} instances to the \hl{Kind}
instance of \hl{Entity}.

\mytablefloat{\label{tbl:relationship}Example of the \hl{Kind} relationships involved
for a domain-specific extension of the OCCI Infrastructure type \hl{Compute}.}{
\begin{tabular}{p{7cm}p{7cm}}
\toprule
Kind instance & Related Kind instance \\
\colrule
\textit{http://example.com/occi/custom\#compute} & \textit{http://schemas.ogf.org/occi/infrastructure\#compute} \\
\textit{http://schemas.ogf.org/occi/infrastructure\#compute} & \textit{http://schemas.ogf.org/occi/core\#resource} \\
\textit{http://schemas.ogf.org/occi/core\#resource} & \textit{http://schemas.ogf.org/occi/core\#entity} \\
\botrule
\end{tabular}
}

\subsubsection{Mixin Relationship}
\label{sec:mixin_relationship}

\textbf{(Andy: Make this a subsection of Mixin to capitalise on context.)}

A \hl{Mixin} instance MAY be related to another \hl{Mixin} instance for
type classification purposes. For example a set of operating system templates,
implemented as \hl{Mixin} instances, could be related to an ``OS-template''
\hl{Mixin} in order to help identification.

Attributes and \hl{Action}s defined by \hl{Mixin} instances are combined when
\hl{Mixin} relationships are present. Therefore a resource instance associated
with a particular \hl{Mixin} will receive the additional capabilities defined
by any related \hl{Mixin} instances as well as those defined by the \hl{Mixin}
associated.

\subsubsection{Kind and Mixin Assignment}
\label{sec:assignment}

A unique \hl{Kind} instance MUST be statically assigned \textbf{(Andy: Explain the significance of 'statically'.)} 
to each sub-type of
\hl{Entity} defined by an OCCI implementation. Every instance of \hl{Kind}
represents a unique type identifier for a particular sub-type of \hl{Entity}.
Consequently, when an \hl{Entity} sub-type is instantiated the resource instance
MUST be associated with its type identifier, i.e.~the \hl{Kind} instance.
A resource instance MUST remain associated with its \hl{Kind} instance throughout
its lifetime.

A \hl{Mixin} instance MAY be associated with an resource instance, either at
instance creation-time or at run-time. Although the OCCI core model has no such
restrictions, an OCCI implementation MAY impose restrictions on which resource
instances can be associated with a particular \hl{Mixin} instance.
%
When a client attempts to associate a \hl{Mixin} instance to a resource at a
stage not supported by a particular provider's OCCI implementation, the
provider MUST notify the client it has issued a bad request.

\subsubsection{Resource Instantiation}
\label{sec:instantiation}
To create a resource instance a client MUST supply the concrete \textbf{(Andy: domain-specific? extension?.)} 
\hl{Entity} sub-type by a submitting a reference to the type-identifying \hl{Kind}. The
reference SHOULD \textbf{(Andy: Why SHOULD? MUST may be more 
appropriate even that this combination is core to the type system)} consist of the term 
and categorisation scheme, which
identify the \hl{Kind} instance, see section~\ref{sec:category}.
All OCCI implementations MUST understand these requests.

A client MAY also submit any number of references to \hl{Mixin} instances to be
associated with the resource to be created. A \hl{Mixin} reference submitted by
a client SHOULD \textbf{(Andy: See above.)} consist of the term and categorisation scheme which identify
the \hl{Mixin} instance. 
Associating a \hl{Mixin} at resource
instantiation time MAY have additional provider defined side-effects,
side-effects not visible through the OCCI discovery mechanism. Templates that
pre-populate certain attributes of a resource instance SHOULD be implemented
using such \hl{Mixin} instances.

\subsubsection{Collections}
\label{sec:collection}
One or more resource instances associated with the same \hl{Kind} or \hl{Mixin}
instance, automatically form a collection.
Each \hl{Kind} and \hl{Mixin} instance in the system identifies a collection
consisting of all different resource instances associated with the \hl{Kind} or
\hl{Mixin}.

A resource instance is always a member of the collection indicated by the
\hl{Entity} sub-type's unique \hl{Kind} instance. A \hl{Kind} instance maintains
the collection of all resource instances (of the type identified by the
\hl{Kind}).
%
Since a \hl{Mixin} instance can be associated to any resource instance, a
collection can contain resource instances of different \hl{Entity} sub-types.
%
For example, an instance of the \hl{Resource} type will always be associated
to the \hl{Kind} instance
\textit{http://scheme.ogf.org/occi/core\#resource} and thus part of the
collection implied by that \hl{Kind} instance.
\begin{description}
\item[Adding a resource instance] to a collection is accomplished by associating the
 resource instance to the corresponding \hl{Mixin} instance.
\item[Removing a resource instance] from a collection is accomplished by disassociating
 the resource instance from the corresponding \hl{Mixin} instance.
\end{description}
%
An OCCI implementation MUST allow a client to navigate collections. The
following basic navigation operations MUST be supported:
\begin{itemize}
\item Retrieve the whole collection.
\item Retrieve a specific item in a collection.
\item Retrieve a subset of a collection.
\end{itemize}

\textbf{(Andy: Comment to Thijs - is this functionality supported in the HTTP rendering?)}

The details of collection navigation is rendering specific.

\subsubsection{Discovery}
\label{sec:discovery}
An OCCI client MUST be able to discover all instances of \hl{Kind}, \hl{Mixin}
and \hl{Category} a particular service provider's OCCI implementation has
defined. By examining these instances a client MUST be able to, at a minimum,
deduce the following information:
\begin{itemize}
\item The \hl{Entity} sub-types available from a the service provider,
 including domain-specific extensions. This information is provided through the
 \hl{Kind} instances of the OCCI implementation.
\item The attributes defined for each \hl{Entity} sub-type. The identifying
 \hl{Kind} instance provide this information.
\item The invocable operations, i.e.~\hl{Action}s, defined for each \hl{Entity}
 sub-type. The identifying \hl{Kind} instance provide this information.
\item Any \hl{Mixin} instances that can be associated to resource instances.
\item Additional capabilities defined by a particular \hl{Mixin} instance,
 i.e.~attributes and \hl{Action}s.
\end{itemize}
The above requirements comprise the OCCI discovery mechanism. It MUST be
implemented.
%
The details of exactly how the \hl{Category}, \hl{Kind} and \hl{Mixin}
instances are exposed to an OCCI client is specific to the particular rendering
used.
The relevant details can be found in the OCCI Rendering documents.


\subsection{The OCCI Core Base Types}
\label{sec:base_types}
The following sections describe the OCCI base types defined by the OCCI core model.
The base types are \hl{Entity}, \hl{Resource}, \hl{Link} and \hl{Action}. All
base types MUST be implemented.

\subsubsection{Entity}
\label{sec:entity}
The \hl{Entity} type is an abstract type of
\hl{Resource} and \hl{Link} and any domain-specific sub-types thereof. It MUST
be implemented.
%
Table~\ref{tbl:entity} defines the attributes the \hl{Entity} type MUST implement to
be compliant.

\mytablefloat{\label{tbl:entity}Attributes defined for the \hl{Entity} type.}{
\begin{tabular}{llllp{7cm}}
\toprule
Attribute & Type & Multiplicity & Client Mutability & Description \\
\colrule
id & URI & 1 & Immutable & A unique identifier (within the service provider's name-space) of the \hl{Entity} sub-type instance. \\
title & String & 0..1 & Mutable & The display name of the instance. \\
kind & \hl{Kind} & 1 & Immutable & The \hl{Kind} instance uniquely identifying the \hl{Entity} sub-type of the resource instance. \\
mixins & \hl{Kind} & 0..* & Mutable & The \hl{Mixin} instances associated to this resource instance. Consumers can expect the attributes and \hl{Action}s of the associated \hl{Mixin}s to be exposed by the instance. \\ 
\botrule
\end{tabular}
}

\hl{Entity} enforces for all sub-types a required \texttt{id} attribute and an
optional \texttt{title} attribute.
%
Every sub-type of \hl{Entity} MUST be assigned a \hl{Kind} instance, see
section~\ref{sec:kind}. \hl{Entity} itself is assigned the \hl{Kind} instance
\textit{http://schemas.ogf.org/occi/core\#entity} for type identification. Being 
an abstract type \hl{Entity} itself can never be instantiated.
%
An \hl{Entity} sub-type instance, a resource instance, MAY be associated with
one or more \hl{Mixin} instances.

An \hl{Entity} sub-type instance MUST expose its identifying \hl{Kind} instance
and any associated \hl{Mixin} instances together with the attributes and
\hl{Action}s defined by them.

\subsubsection{Resource}
\label{sec:resource}
The \hl{Resource} type inherits \hl{Entity} and describes a concrete resource that
\textbf{(Andy: define what a concrete resource is.)}
can be inspected and manipulated. It represents a general object in the OCCI
model and MUST be implemented. A \hl{Resource} is suitable to represent real
world resources, e.g. virtual machines, networks, services, etc. through specialisation.
%
The \hl{Resource} type MUST implement all attributes inherited from \hl{Entity}
as well as the attributes defined in table~\ref{tbl:resource} in order
to be compliant.
%
The \hl{Resource} type is assigned the \hl{Kind} instance
\textit{http://schemas.ogf.org/occi/core\#resource}.

\mytablefloat{\label{tbl:resource}Attributes defined for the \hl{Resource} type.}{
\begin{tabular}{llllp{8cm}}
\toprule
Attribute & Type & Multiplicity & Client Mutability & Description \\
\colrule
summary & String & 0..1 & Mutable & A summarising description of the \hl{Resource} instance.\\
links & \hl{Link} & 0..* & Mutable & A set of \hl{Link} compositions. Being a composite relation the removal of a \hl{Link} from the set MUST also remove the \hl{Link} instance.\\
\botrule
\end{tabular}
}

\hl{Resource} enforces the inheritance of a set of common attributes into
sub-types. Moreover, it introduces relationships to other \hl{Resource}
instances through instances of the \hl{Link} type.
%
The \hl{Resource} type is the entry point for domain-specific extensions of the
OCCI core model, see section~\ref{sec:extensibility} 
\textbf{(Andy: Somewhat contradicts what is said in 1st sentence of 4.4.1.)}.

\subsubsection{Link}
\label{sec:link}
An instance of the \hl{Link} type defines a base association between two
\hl{Resource} instances. It MUST be implemented. A \hl{Link} instance indicates
that one \hl{Resource} instance is connected to another.
%
The \hl{Link} type MUST implement all attributes inherited from the
\hl{Entity} type together with the attributes defined in table~\ref{tbl:link}
in order to be compliant.
%
The \hl{Link} type is assigned the \hl{Kind} instance
\textit{http://schemas.ogf.org/occi/core\#link}.

\mytablefloat{\label{tbl:link}Attributes defined for the \hl{Link} type.}{
\begin{tabular}{llllp{7.5cm}}
\toprule
Attribute & Type & Multiplicity & Client Mutability & Description \\
\colrule
source & \hl{Resource} & 1 & Mutable & The \hl{Resource} instances the \hl{Link} instance originates from.\\
target & \hl{Resource} & 1 & Mutable & The \hl{Resource} instances the \hl{Link} instance points to.\\
\botrule
\end{tabular}
}

An instance of the \hl{Link} type MUST NOT refer to an external resource
\textbf{(Andy: what is this in the context of OCCI/provider?)}.  A
provider MAY however create a sub-type of \hl{Link} with different semantics,
e.g.~having a target attribute containing an URI and thus the ability of linking
with external resources.
%
The \hl{Link} type can be sub-typed for domain-specific extensions of the
OCCI core model, see section~\ref{sec:extensibility}.

\subsubsection{Action}
The \hl{Action} type defines an invocable operation applicable to an \hl{Entity}
sub-type instance or a collection thereof. It MUST be implemented. In general,
\hl{Action}s modify state by, for example,~performing a complex operation such as
rebooting a virtual machine.
%
Table~\ref{tbl:action} defines the attributes the \hl{Action} type MUST
implement to be compliant.

\mytablefloat{\label{tbl:action}Attributes defined for the \hl{Action} type.}{
\begin{tabular}{llllp{7.5cm}}
\toprule
Attribute & Type & Multiplicity & Client Mutability & Description \\
\colrule
category & \hl{Category} & 1 & Immutable & The identifying \hl{Category} of the \hl{Action}. \\
\botrule
\end{tabular}
}

An \hl{Action} MUST always bound to either a \hl{Kind} or a \hl{Mixin} instance
through a composite association. An \hl{Action} is considered to be a
capability of the \hl{Kind} or \hl{Mixin} instance it is associated with.  An
\hl{Action} MAY be invoked on any resource instance associated with the
\hl{Kind} or \hl{Mixin} instance defining the \hl{Action}. An OCCI
implementation MAY however refuse an \hl{Action} from being invoked if
currently not applicable.

An \hl{Action} MAY be invoked on a collection of \hl{Entity} sub-type
instances. The \hl{Action} is only considered valid if all resource instances
of the collection are associated with the \hl{Kind} or \hl{Mixin} defining the
\hl{Action}.

An \hl{Action} can expose attributes which correspond to arguments of the
invocable operation.  Any attributes are defined through the \hl{Category}
instance which identify the \hl{Action}. For example, a ``resize'' \hl{Action}
defined for a storage resource can have a ``size'' attribute which represent the
size argument of the resize operation.

The \hl{Action} type is assigned the \hl{Category} type identifier
\textit{http://schemas.ogf.org/occi/core\#action}.
%
The \hl{Action} type can be sub-typed for domain-specific extensions of the
OCCI model, see section~\ref{sec:extensibility}.

\subsection{Mutability}

\textbf{(Andy: Should be explained at the beginning of the document. It's a document convention.)}

Attributes of an OCCI core model type instance are
either client mutable or client immutable. If an attribute is noted to
be mutable this MUST be interpreted that a client can create an
instance that is parametrised by the attribute. Likewise, if
an attribute is mutable, a client can update that instance's
mutable attribute value and the server side MUST support this. If an
attribute is marked as immutable, it indicates that the server side
implementation MUST manage these exclusively. Immutable attributes
MUST NOT be modifiable by clients under any circumstance.

\subsection{Extensibility}
\label{sec:extensibility}
The OCCI model has a flexible yet fairly simple extension mechanism based on
the type classification system described in section~\ref{sec:classification}.
%
The OCCI model can be extended using two different methods, sub-typing and
mix-in. Custom sub-typing require domain-specific \hl{Kind} instances and
custom mix-ins require domain-specific \hl{Mixin} instances.  Both methods MAY
involve the use of domain-specific \hl{Category} instance since those are
REQUIRED for domain-specific \hl{Action} sub-types.  The following sections
define the rules for extensions of the OCCI model.
%
The rules defined in section~\ref{sec:classification} and \ref{sec:base_types}
are REQUIRED for all extensions of the OCCI model.

\subsubsection{Category instances}
\label{sec:ext:category}
Domain-specific instances of \hl{Category}, \hl{Kind} and \hl{Mixin} MAY be
introduced by an OCCI implementation. Since \hl{Kind} and \hl{Mixin} both
inherit \hl{Category} the extension rules for \hl{Category}, defined below,
applies to them as well.

A \hl{Category} instance defined outside of the OCCI specification MUST use a
\hl{Category} scheme unique to the provider,
e.g.~\textit{http://example.com/occi\#} \textbf{(Andy: What about 'term' - mention for completeness.)}.
%
An attribute introduced by a domain-specific \hl{Category} MUST
use an attribute name prefix. This prefix MUST NOT be the ``\texttt{occi.}''~prefix
which is reserved for the OCCI specification. Domain-specific attribute names
SHOULD use a prefix consisting of the provider's reverse domain name,
e.g.~``\texttt{com.example.}''.

\subsubsection{Sub-typing}
The OCCI model MAY be extended through sub-typing for domain-specific purposes.
Three OCCI model types MAY be sub-typed, those are \hl{Resource}, \hl{Link} and
\hl{Action}. \textbf{(Andy: Inconsistent - previously (4.4.2, 4.4.3) we said that Entity 
could be extended and no mention of Action.)} 
\textbf{(Andy: what is the case for extending Action by subclassing?)}

In order to define a sub-type of \hl{Resource} or \hl{Link} a domain-specific
\hl{Kind} instance MUST be defined and assigned to the sub-type. This
\hl{Kind} instance MUST be directly related to the \hl{Kind} instance of the
type extended.

In order to define a sub-type of \hl{Action} a domain-specific \hl{Category}
instance MUST be assigned to the \hl{Action} sub-type as its unique type identifier.
Furthermore the \hl{Action} sub-type MUST be associated as a capability of a
domain-specific \hl{Kind} or \hl{Mixin} instance.

\subsubsection{Mix-ins}
The OCCI model MAY be extended using the mix-in concept \textbf{(Andy: See previous comment (section 4))} by defining
domain-specific \hl{Mixin} instances.  A \hl{Mixin} instance can be associated
with any resource instance although a provider MAY apply restrictions.

In order to support user-defined tags \footnote{A tag is a \hl{Mixin} instance, 
which does not introduce additional capabilities.} an OCCI implementation must allow custom
\hl{Mixin} instances to be created and destroyed by request of a client.
There is no limitation in the OCCI model from doing so but it is RECOMMENDED to
assign a separate \hl{Category} scheme for each user's \hl{Mixin} instances (e.g. per-user schemes).

\section{Contributors}
Editors: Andy Edmonds, Thijs Metsch, Ralf Nyr√©n \\
Contributors: Alexander Papaspyrou, Sam Johnston

\textbf{TBD: Bunch op people missing here - create table\ldots}

\section{Glossary}
\label{sec:glossary}
\input{include/glossary}


\section{Intellectual Property Statement}
\input{include/ip}

\section{Disclaimer}
\input{include/disclaimer}

\section{Full Copyright Notice}
\input{include/copyright}

\bibliographystyle{IEEEtran}
\bibliography{references}

\end{document}
